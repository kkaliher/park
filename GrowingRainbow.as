class Rainbow {		private var classObj:Object;	private var parentMC:MovieClip;	private var rainbow:MovieClip;	private var centerX:Number;	private var centerY:Number;	private var radius:Number;	private var size:Number;	private var angle:Number;	private var angleInc:Number;	private var radians:Number;	private var segment:Number;	private var stopSegment:Number;	private var colorArray:Array;	private var stopCount:Number;		function Rainbow(pMC:MovieClip){		if (pMC.raining==true){			return;		}		trace ("new Rainbow");		parentMC = pMC;		classObj = this;		centerX = pMC.w/2;		centerY = pMC.h;		radius = (5*pMC.w/Stage.height)+pMC.w/2;		size = 5*pMC.w/Stage.height;		angle = 180;		angleInc = .3;		segment = 0;		colorArray = new Array(0xFF0033,0xFF9933,0xFFFF00,0x66FF00,0x0066FF,0x9900FF,0xFF00FF);		stopCount=0;		rainbow = pMC.createEmptyMovieClip("rainbow",7000);		rainbow.classObj = this;		rainbow._alpha=100;		rainbow.onEnterFrame = function(){			this.classObj.growArc();		}			}		private function growArc():Void{		angle-=angleInc;		if (angle>170){			return;		}		segment++;		for (var i=0;i<colorArray.length;i++){			var color = colorArray[i];			if (colorArray[i]==0){				continue;			}			var cradius = radius-(size*i);			//trace ("color = "+color+", cradius = "+cradius);			drawLine(	centerX+cradius*Math.cos(getRadians(angle)),						centerY-cradius*Math.sin(getRadians(angle)),						centerX+cradius*Math.cos(getRadians(angle-angleInc)),						centerY-cradius*Math.sin(getRadians(angle-angleInc)),						i*1000+segment,						color,						size+1,						i);		}	}		private function stopGrowing():Void{		trace ("stop growing");		stopSegment = segment;		segment=0;		rainbow.onEnterFrame = function(){			//this.classObj.fadeArc();		}	}		private function fadeArc():Void{		segment++;		for (var i=0;i<colorArray.length;i++){			rainbow["line"+(i*1000+segment)].clear();			rainbow["line"+(i*1000+segment)].removeMovieClip();		}		if (segment==stopSegment){			delete rainbow.onEnterFrame;		}	}		private function getRadians(a):Number{		return ( a*Math.PI/180 );	}		private function drawLine(startX:Number,				  			startY:Number,				  			endX:Number,				  			endY:Number,				  			segment:Number,				  			color:Number,				  			lineweight:Number,							slice:Number):Void{		if (parentMC.G.getGroundY(Math.floor(endX))!=undefined and endY+3>=parentMC.G.getGroundY(Math.floor(endX))){			if (angle <90){				stopCount++;				colorArray[slice]=0;				if (stopCount==7){					stopGrowing();				}			}			return;		}		var line:MovieClip = rainbow.createEmptyMovieClip("line"+segment,segment);		//trace ("rainbow segment from "+startX+","+startY+" to "+endX+","+endY);		with (line){			lineStyle(lineweight,color,20);			moveTo(startX,startY);			lineTo(endX,endY);		}	}}